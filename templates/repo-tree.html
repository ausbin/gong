{{ define "repo-body" }} 
  <ul id="files">
    {{ if not .IsRoot }}
        <li><span class="filemode">d---------</span><a class="filedir" href="..">..</a></li>
    {{ end }}
    {{ range .Files }}
        <li><span class="filemode">{{ if .IsDir }}d{{ else }}-{{ end }}{{ if .IsExecutable }}rwxr-xr-x{{ else }}rw-r--r--{{ end }}</span><a {{ if .IsDir }}class="filedir" {{ end }}href="{{ .Name }}/">{{ .Name }}</a>{{ if .IsFile }}<span class="filesize">{{ .Size }}</span>{{ end }}</li>
    {{ end }}
  </ul>
  <div id="readme">
    <h1>nsdo</h1>
    
    <p><code>nsdo</code> (network namespace do) is a simple C program that runs a command
    inside a given <a href="https://lwn.net/Articles/580893/">Linux network namespace</a>.</p>
    
    <p>Effectively, it simplifies:</p>
    
    <pre><code>$ sudo ip netns exec myns sudo -u $USER myprogram
    </code></pre>
    
    <p>to</p>
    
    <pre><code>$ nsdo myns myprogram
    </code></pre>
    
    <p>Thanks to magic of the <a href="https://en.wikipedia.org/wiki/Setuid">setuid bit</a>, it initially has root
    privileges, which allows it to change its own network namespace,
    <code>setuid()</code> to the user who ran the command, and then <code>exec()</code> the
    requested command.</p>
    
    <h2>installation</h2>
    
    <p>If you're on Arch, you can build <a href="https://aur.archlinux.org/packages/nsdo-git/">my AUR package</a>.</p>
    
    <p>Otherwise:</p>
    
    <pre><code>$ make
# make install
    </code></pre>
    
    <p>To change the default installation directory of <code>/usr/local</code>, set
    <code>PREFIX</code> to something else when you call <code>make install</code>.</p>
    
    <h2>openvpn example</h2>
    
    <p>I wrote this program because I run some applications under a VPN (e.g.,
    clients for peer-to-peer protocols) and leave others untouched (like a
    game client).</p>
    
    <p>For more details, see <code>openvpn-example.md</code> (<a href="https://code.austinjadams.com/nsdo/plain/openvpn-example.md">cgit</a>, <a href="https://github.com/ausbin/nsdo/blob/master/openvpn-example.md">github</a>).</p>
    
    <h2>license</h2>
    
    <p><a href="https://github.com/ausbin/nsdo/blob/master/LICENSE">MIT/X11</a>.</p>
    
    <h2>manpage</h2>
    
    <pre><code>nsdo(1)               General Commands Manual              nsdo(1)

NAME
   nsdo - run a command in a network namespace

SYNOPSIS
   nsdo namespace command [args ...]

   nsdo { --version | -V }

DESCRIPTION
   Execute  command  as the current user/group in namespace, a
   Linux network namespace  set  up  with  iproute2  (see  ip-
   netns(8)).

   By   default,   iproute2   places   network  namespaces  in
   /var/run/netns/,  so  nsdo  searces  for  namespaces  there
   (including  namespace).   To  prevent  command  from easily
   escaping the namespace 'jail,' nsdo will exit if  the  cur‚Äê
   rent namespace exists in that directory.  Consequently, you
   can not nest instances of nsdo.

OPTIONS
   --version, -V
          Instead of running a command, print  nsdo's  version
          and exit.

SEE ALSO
   ip(8), ip-netns(8), namespaces(7)

                        2016-01-23                     nsdo(1)
</code></pre>
{{ end }}
